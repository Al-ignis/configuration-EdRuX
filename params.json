{"name":"Configuration","tagline":"","body":"# **Ключевые заметки для установки Open edX на сервер Ubuntu 14.04**\r\n\r\n**Шаг 0.** Апгрейдим сервер до последней версии\r\n`sudo apt-get update -y`\r\n`sudo apt-get upgrade -y`\r\n`sudo reboot`\r\n**Шаг 1.** Устанавливаем необходимые пакеты\r\nДля удобства управления и отладки устанавливаем файловый менеджер MC редактор NANO и почтовый клиент MUTT.\r\n_Если вы не считаете нужным установку этих пакетов, то данный шаг можно пропустить._\r\n`sudo apt-get install mc nano mutt`\r\n\r\nsudo apt-get install -y build-essential software-properties-common python-software-properties curl git-core libxml2-dev libxslt1-dev libfreetype6-dev python-pip python-apt python-dev libxmlsec1-dev swig\r\nsudo pip install --upgrade virtualenv\r\n2. Создаём клон edX для установки\r\ncd /var/tmp\r\ngit clone -b release https://github.com/edx/configuration\r\n3. Вносим изменения nano /var/tmp/configuration/playbooks/roles/common/defaults/main.yml\r\nCOMMON_SSH_PASSWORD_AUTH to \"yes\"\r\n4. Меняем (устанавливаем) пароль для mysql\r\nпроверяем, можем ли зайти mysql -u root -p\r\nесли нет то меняем... Подробности в статье http://webew.ru/articles/2104.webew\r\nskip-grant-tables\r\nflush privileges;\r\ngrant all ON *.* TO `root`@`localhost` identified by 'mypassword' with grant option;\r\nНародный edX\r\n2\r\n5. Создаем файл /root/.my.cnf\r\n----------- Начало .my.cnf ------------\r\n[client]\r\nuser=root\r\npassword=<your root pass>\r\n[mysql]\r\nuser=root\r\npassword=<your root pass>\r\n[mysqldump]\r\nuser=root\r\npassword=<your root pass>\r\n[mysqldiff]\r\nuser=root\r\npassword=<your root pass>\r\n----------- Конец .my.cnf ------------\r\n6. Поменять значения переменной EDXAPP_PYTHON_SANDBOX на False в playbooks/roles/edxapp/defaults/main.yml\r\n7. Найти файл /var/tmp/configuration/playbooks/roles/edxapp/tasks/python_sandbox_env.\r\nПоменять:\r\ncommand: update-alternatives –set libblas.so.3gf /usr/lib/libblas/libblas.so.3gf\r\nна:\r\ncommand: update-alternatives –set libblas.so.3 /usr/lib/libblas/libblas.so.3\r\nи в строке:\r\nНародный edX\r\n3\r\ncommand: update-alternatives –set liblapack.so.3gf /usr/lib/lapack/liblapack.so.3gf\r\nна:\r\ncommand: update-alternatives –set liblapack.so.3 /usr/lib/lapack/liblapack.so.3\r\n8. Исправить\r\n/var/tmp/configuration/playbooks/roles/elasticsearch/tasks/main.yml\r\nget_url: >\r\nurl=http://download.elasticsearch.org/elasticsearch/elasticsearch/{{ elasticsearch_file }}\r\n9. Проверить /etc/update-motd.d\r\nsudo apt-get install landscape-common\r\nsudo apt-get install update-notifier-common\r\nсоздаём 51-cloudguest\r\n=========Начало 51-cloudguest =============\r\nФайл может быть пустым\r\n========Конец 51-cloudguest =============\r\nСоздаём\r\n91-release-upgrade\r\n=========Начало 91-release-upgrade ============\r\n#!/bin/sh\r\n# if the current release is under development there won't be a new one\r\nif [ \"$(lsb_release -sd | cut -d' ' -f4)\" = \"(development\" ]; then\r\nexit 0\r\nfi\r\nif [ -x /usr/lib/ubuntu-release-upgrader/release-upgrade-motd ]; then\r\nexec /usr/lib/ubuntu-release-upgrader/release-upgrade-motd\r\nfi\r\n=========Конец 91-release-upgrade ============\r\nНародный edX\r\n4\r\n10. Создать линк\r\nsudo ln -s /usr/include/freetype2 /usr/include/freetype\r\n11.\r\ncd /var/tmp/configuration\r\nsudo pip install -r requirements.txt\r\n12. Запускаем инсталляцию\r\ncd /var/tmp/configuration/playbooks && sudo ansible-playbook -c local ./edx_sandbox.yml -i \"localhost,\"\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}